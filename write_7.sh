#!/bin/bash
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib
declare -i data=${2}\*1024\*1024\*1024\/${3}
./db_bench_7 --benchmarks="fillseq" \
--db=${1}/${3}B/${2}G \
--allow_concurrent_memtable_write=false \
--level0_file_num_compaction_trigger=4 \
--level0_slowdown_writes_trigger=20 \
--level0_stop_writes_trigger=30 \
--max_background_jobs=8 \
--max_write_buffer_number=8 \
--num=${data} \
--num_levels=8 \
--key_size=20 \
--value_size=${3} \
--block_size=8192 \
--cache_size=51539607552 \
--cache_numshardbits=6 \
--compression_max_dict_bytes=0 \
--compression_type=snappy \
--bytes_per_sync=8388608 \
--cache_index_and_filter_blocks=1 \
--cache_high_pri_pool_ratio=0.5 \
--benchmark_write_rate_limit=0 \
--write_buffer_size=16777216 \
--target_file_size_base=16777216 \
--max_bytes_for_level_base=67108864 \
--verify_checksum=1 \
--delete_obsolete_files_period_micros=62914560 \
--max_bytes_for_level_multiplier=8 \
--statistics=0 \
--memtablerep=skip_list \
--bloom_bits=10 \
--open_files=-1 \
--subcompactions=1 \
--compaction_style=0 \
--min_level_to_compress=3 \
--level_compaction_dynamic_level_bytes=true \
--pin_l0_filter_and_index_blocks_in_cache=1 \
--soft_pending_compaction_bytes_limit=24696061952 \
--hard_pending_compaction_bytes_limit=49392123904 \
--min_level_to_compress=0 \
--use_existing_db=0 \
--sync=0 \
--threads=1 \
--memtablerep=vector \
--allow_concurrent_memtable_write=false \
--disable_wal=1 \
--seed=1642906118 \
